<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>🎂</title>
  <link rel="preload" as="image" href="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExbWdwNHoxamV3czJiZWtjd2NkcDI0ZGQyY2F1N29scDJ5bTE2d25naSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/o85Cv5m1TX9OQvKS44/giphy.gif">
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      display:grid; place-items:center; background:#fff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Poppins, sans-serif;
    }
    .gif{
      width:min(520px, 92vw);
      border-radius:18px; overflow:hidden;
      box-shadow: 0 16px 40px #0000001a;
      cursor:pointer; position:relative;
    }
    .gif img{width:100%; height:auto; display:block}
    .hint{
      position:fixed; bottom:18px; left:50%; transform:translateX(-50%);
      font-size:12px; color:#000; opacity:0; transition:opacity .25s ease;
      background:#fff; padding:6px 10px; border-radius:999px; box-shadow:0 8px 20px #0000001a;
      pointer-events:none;
    }
    .hint.show{opacity:.7}
  </style>
</head>
<body>
  <!-- 🎵 Replace the src with your own MP3 if you like -->
  <audio id="song" preload="auto">
    <!-- Example royalty-free/placeholder link — replace with your hosted MP3 -->
    <source src="./song.mp3" type="audio/mpeg">
  </audio>

  <div class="gif" id="tapArea">
    <img alt="Kenny 💝" 
      src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExbWdwNHoxamV3czJiZWtjd2NkcDI0ZGQyY2F1N29scDJ5bTE2d25naSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/o85Cv5m1TX9OQvKS44/giphy.gif">
  </div>

  <div class="hint" id="hint">🎵 Playing… opening the surprise</div>

  <script>
    const NAV_DELAY_MS = 12000; // ⏱️ delay before navigating (after first tap)
    const nextPage = 'main.html';

    const tapArea = document.getElementById('tapArea');
    const song = document.getElementById('song');
    const hint = document.getElementById('hint');

    let triggered = false;

    async function handleTap(){
      // first tap: play song, show hint, then navigate after delay
      if(!triggered){
        triggered = true;
        try{
          // On iOS, make sure the phone is not in silent mode
          await song.play();
        }catch(e){
          // If play fails (e.g., user’s device blocks it), we still proceed
        }
        hint.classList.add('show');
        setTimeout(()=> { location.href = nextPage; }, NAV_DELAY_MS);
      }else{
        // Any subsequent tap: navigate immediately
        location.href = nextPage;
      }
    }

    tapArea.addEventListener('click', handleTap);
    tapArea.addEventListener('touchend', handleTap, {passive:true});
  </script>
</body>
</html>
